BASE_DATA_DIR="/var/datasets/LIA/Umamba_data/nnUNet_raw"
datasetname="Dataset433_ChoroidPlexus_T1xFLAIR_sym_UMAMBA" 
INPUT_FOLDER="$BASE_DATA_DIR/$datasetname/imagesTs"

# X nnUNetTrainerConvexHullUMambaEnc__nnUNetPlans_conv_Enc_yx_diag__3d_fullres
# nnUNetTrainerUMambaEnc__nnUNetPlans_enc_z_scan__3d_fullres
# nnUNetTrainerConvexHullUMambaEnc__nnUNetPlans_conv_z_32__3d_fullres
OUTPUT_FOLDER="/home/studenti/lia/lia_masterthesis/phuse_thesis_2024/thesis_experiments/umamba_predictions/working_directory_T1xFLAIR/pred_raw/nnUNetTrainerConvexHullUMambaEnc_yx_diag"
OUTPUT_FOLDER_PP="/home/studenti/lia/lia_masterthesis/phuse_thesis_2024/thesis_experiments/umamba_predictions/working_directory_T1xFLAIR/pred_pp/nnUNetTrainerConvexHullUMambaEnc_yx_diag"

mkdir -p $OUTPUT_FOLDER
mkdir -p $OUTPUT_FOLDER_PP

#nnUNetTrainerConvexHullUMambaEnc__nnUNetPlans_conv_Enc_yx_diag__3d_fullres
nnUNetv2_predict -d Dataset433_ChoroidPlexus_T1xFLAIR_sym_UMAMBA -i $INPUT_FOLDER -o $OUTPUT_FOLDER -f  0 1 2 3 -tr nnUNetTrainerConvexHullUMambaEnc -c 3d_fullres -p nnUNetPlans_conv_Enc_yx_diag

nnUNetv2_find_best_configuration 433 -c 3d_fullres -tr nnUNetTrainerConvexHullUMambaEnc -p nnUNetPlans_conv_Enc_yx_diag -f 0 1 2 3

nnUNetv2_apply_postprocessing -i $OUTPUT_FOLDER -o $OUTPUT_FOLDER_PP -pp_pkl_file /var/datasets/LIA/Umamba_data/nnUNet_results/Dataset433_ChoroidPlexus_T1xFLAIR_sym_UMAMBA/nnUNetTrainerConvexHullUMambaEnc__nnUNetPlans_conv_z_32__3d_fullres/crossval_results_folds_0_1_2_3/postprocessing.pkl -np 8 -plans_json /var/datasets/LIA/Umamba_data/nnUNet_results/Dataset433_ChoroidPlexus_T1xFLAIR_sym_UMAMBA/nnUNetTrainerConvexHullUMambaEnc__nnUNetPlans_conv_z_32__3d_fullres/crossval_results_folds_0_1_2_3/plans.json

